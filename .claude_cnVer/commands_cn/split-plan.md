---
name: split-plan
description: "è®¡åˆ’æ‹†åˆ†å‘½ä»¤ï½œå°†æ¯è®¡åˆ’ä¸­çš„å¤§ä»»åŠ¡æ‹†åˆ†æˆç‹¬ç«‹å­è®¡åˆ’ï¼›å»ºç«‹çˆ¶å­åŒå‘é“¾æ¥ï¼›ç»Ÿä¸€ docs/plan/ å‘½åä¸é”šç‚¹ï¼›ç¬¬ä¸€æ­¥å¿…å»ºæ—¥å¿—ä¸ TodoList"
allowed-tools:
  - TodoWrite
  - Task(task-planner)
  - Task(architect)
  - Task(api-expert)
  - Task(product-manager)
  - Task(database-expert)
  - Task(code-agent)
  - Task(test-agent)
  - Read
  - Write
  - Edit(*.md)
  - Grep(*)
  - Glob(*)
  - Bash(*)
---

## æ¦‚è¦

- ä½ å°†è·å¾—ï¼šå¯¹â€œå¤§ä»»åŠ¡â€çš„åˆç†æ‹†åˆ†ä¸å‘½åã€å­è®¡åˆ’æ–‡ä»¶ `docs/plan/plan-<task-kebab>-part<N>.md`ã€çˆ¶è®¡åˆ’çš„å ä½æ›´æ–°ä¸å­è®¡åˆ’å›é“¾ã€ç»Ÿä¸€çš„æ—¥å¿—ä¸å¹‚ç­‰ç­–ç•¥ã€‚
- ä½ éœ€è¦æä¾›ï¼š`scope_dir`ã€`plan_path`ã€`task_anchor`ï¼›å¯é€‰ `naming_rules`ã€`backend_ref_dir`ã€`extra_context`ã€‚
- äº§å‡ºç‰©ï¼šä¸€ä¸ªæˆ–å¤šä¸ªå­è®¡åˆ’æ–‡ä»¶ã€çˆ¶è®¡åˆ’çš„æ›´æ–°ã€`docs/logs/split-plan-YYYYMMDD-HHmm.md`ã€‚

## è¾“å…¥

required:
- scope_dir: æ‰§è¡Œæ ¹ï¼ˆbackend | frontend-shell | backend-module | frontend-moduleï¼‰
- plan_path: ç›®æ ‡è®¡åˆ’æ–‡æ¡£ï¼ˆå¦‚ `docs/plan/plan-<scope>.md`ï¼‰
- task_anchor: æ¯ä»»åŠ¡é”šï¼ˆå¦‚ `#ä»»åŠ¡-<kebab>`ï¼‰

optional:
- naming_rules: å‘½å/ç›®å½•/é”šç‚¹è§„åˆ™ï¼ˆç»™ architect/code-agent æ ¡éªŒï¼‰
- backend_ref_dir: ï¼ˆå‰ç«¯å¯ä¼ ï¼‰å¯¹é½çš„åç«¯æ–‡æ¡£æ ¹
- extra_context: å…¶å®ƒä¸Šä¸‹æ–‡æˆ–æ‹†åˆ†è¦æ±‚ï¼ˆå¦‚â€œæŒ‰åŠŸèƒ½æ¨¡å—æ‹†/æŒ‰é˜¶æ®µæ‹†/æŒ‰æŠ€æœ¯æ ˆæ‹†â€ï¼‰

---

## ç»Ÿä¸€çº¦æŸ

- ç›®å½•ä¸å‘½åï¼šè®¡åˆ’ç›®å½•å›ºå®š `docs/plan/`ï¼›å­è®¡åˆ’å‘½å `plan-<task-kebab>-part<N>.md`ï¼›é”šç‚¹ `#ä»»åŠ¡-<kebab>`ã€‚
- åŒå‘é“¾æ¥ï¼šçˆ¶è®¡åˆ’ä»»åŠ¡å¡ç‰‡å¿…é¡»åˆ—å‡ºæ‰€æœ‰å­è®¡åˆ’é“¾æ¥ï¼›æ¯ä¸ªå­è®¡åˆ’å¤´éƒ¨ `parent_plan` æŒ‡å‘çˆ¶å¡ç‰‡é”šã€‚
- æ–‡æ¡£è¾¹ç•Œï¼šæœ¬å‘½ä»¤ä¸å®æ–½ä»£ç ï¼Œåªç”Ÿæˆ/æ›´æ–°è®¡åˆ’æ–‡æ¡£ä¸é“¾æ¥ï¼›å®æ–½è¯·ç”¨ `/execute-plan`ã€‚
- å¹‚ç­‰ï¼šå­è®¡åˆ’å­˜åœ¨æ—¶ä¸è¦†ç›–ï¼›å…è®¸æ–°å¢ä¸‹ä¸€ä¸ª `part<N+1>`ï¼›çˆ¶è®¡åˆ’æ›´æ–°é‡‡ç”¨å¢é‡æ–¹å¼ä¿ç•™ç°æœ‰å†…å®¹ã€‚

---

## æ‰§è¡Œæµç¨‹

1) å»ºæ—¥å¿—ä¸ TodoListï¼ˆå¿…åšï¼‰
- ä½¿ç”¨ TodoWrite åˆ›å»º TodoListï¼›åœ¨ `<scope_dir>/docs/logs/` åˆ›å»º `split-plan-YYYYMMDD-HHmm.md`ï¼Œå†™å…¥å¤´éƒ¨ä¸å ä½ã€‚

2) å¤æ‚åº¦åˆ†æä¸æ‹†åˆ†ç­–ç•¥
- Task(task-planner) è¯„ä¼°å·¥ä½œé‡ã€ä¾èµ–ã€æŠ€æœ¯æ ˆä¸è¾¹ç•Œï¼Œç¡®å®šæ‹†åˆ†ç­–ç•¥ï¼ˆåŠŸèƒ½/é˜¶æ®µ/æŠ€æœ¯æ ˆ/é£é™©ï¼‰

3) ç”Ÿæˆå­è®¡åˆ’
- Task(task-planner) ä¸ºæ¯ä¸ªå­å—ç”Ÿæˆ `docs/plan/plan-<task-kebab>-part<N>.md`ï¼Œå†™å…¥ï¼š
  - å­è®¡åˆ’ä¿¡æ¯ï¼ˆçˆ¶ä»»åŠ¡/æ‹†åˆ†ç­–ç•¥/é¢„ä¼°å·¥ä½œé‡/ä¾èµ–ï¼‰
  - ç›®æ ‡ä¸ä»»åŠ¡åˆ†è§£ï¼ˆå¡ç‰‡æ¨¡æ¿å¯ç®€åŒ–ä¸º 3â€“6 æ¡å­ä»»åŠ¡ï¼‰
  - ç›¸å…³æ–‡æ¡£é“¾æ¥ï¼ˆarchitecture/product/api/database æˆ– integration/data-ui/testï¼‰
  - è¿›åº¦è·Ÿè¸ªï¼ˆæ€»æ•°/è¿›è¡Œä¸­/å·²å®Œæˆ/å®Œæˆç‡ï¼‰
  - å¤´éƒ¨ `parent_plan: "<çˆ¶è·¯å¾„>#ä»»åŠ¡-<kebab>"`

4) æ›´æ–°çˆ¶è®¡åˆ’
- åœ¨çˆ¶è®¡åˆ’çš„æ¯ä»»åŠ¡ä¸‹ï¼š
  - æ ‡æ³¨â€œå·²æ‹†åˆ†â€
  - æ·»åŠ å­è®¡åˆ’åˆ—è¡¨é“¾æ¥ï¼ˆPart 1/Part 2/...ï¼‰
  - è®°å½•æ‹†åˆ†ç­–ç•¥ã€æ—¶é—´ã€çŠ¶æ€ï¼ˆç­‰å¾…å­è®¡åˆ’æ‰§è¡Œï¼‰

5) æ—¥å¿—æ€»ç»“
- åœ¨æ—¥å¿—æœ«å°¾è¿½åŠ ç»“æœç»Ÿè®¡ä¸ä¸‹ä¸€æ­¥å»ºè®®ã€‚

---

## è¾“å‡ºæ¨¡æ¿

### å­è®¡åˆ’æ–‡æ¡£
```md
---
document_type: "ä»»åŠ¡è§„åˆ’"
created_date: "YYYY-MM-DD HH:MM:SS"
last_updated: "YYYY-MM-DD HH:MM:SS"
parent_plan: "docs/plan/<parent-file>.md#ä»»åŠ¡-<kebab>"
version: "v1.0.0"
---

# <ä»»åŠ¡> å­è®¡åˆ’ (Part <N>)

## ğŸ“‹ å­è®¡åˆ’ä¿¡æ¯
- çˆ¶ä»»åŠ¡: [<åç§°>](<ç›¸å¯¹è·¯å¾„>#ä»»åŠ¡-<kebab>)
- æ‹†åˆ†ç­–ç•¥: <æŒ‰åŠŸèƒ½/é˜¶æ®µ/æŠ€æœ¯æ ˆ/é£é™©>
- é¢„ä¼°å·¥ä½œé‡: <X> äººå¤©
- ä¾èµ–å…³ç³»: <å…¶å®ƒå­è®¡åˆ’æˆ–ä»»åŠ¡>

## ğŸ¯ å­è®¡åˆ’ç›®æ ‡
<ä»åŸä»»åŠ¡æ‹†åˆ†å‡ºçš„å…·ä½“ç›®æ ‡æè¿°>

## ğŸ“‹ ä»»åŠ¡åˆ†è§£
- [ ] <å­ä»»åŠ¡ 1> â€” <éªŒæ”¶æ ‡å‡†/å®ç°è·¯å¾„é”šç‚¹>
- [ ] <å­ä»»åŠ¡ 2> â€” <éªŒæ”¶æ ‡å‡†/å®ç°è·¯å¾„é”šç‚¹>

## ğŸ”— ç›¸å…³æ–‡æ¡£
- æ¶æ„: <ç›¸å¯¹è·¯å¾„>
- äº§å“: <ç›¸å¯¹è·¯å¾„>
- API/Integration: <ç›¸å¯¹è·¯å¾„>
- æ•°æ®/æ•°æ®UI: <ç›¸å¯¹è·¯å¾„>
- æµ‹è¯•: <ç›¸å¯¹è·¯å¾„>

## ğŸ“Š è¿›åº¦è·Ÿè¸ª
- æ€»ä»»åŠ¡æ•°: <X>
- å·²å®Œæˆ: 0
- è¿›è¡Œä¸­: 0
- å®Œæˆç‡: 0%
```

### çˆ¶è®¡åˆ’æ›´æ–°ç‰‡æ®µ
```md
- [ ] <åŸå¤§ä»»åŠ¡> (å·²æ‹†åˆ†)
  - æ‹†åˆ†æ—¶é—´: <YYYY-MM-DD HH:MM>
  - å­è®¡åˆ’:
    - [Part 1: <å­è®¡åˆ’å>](plan-<ä»»åŠ¡>-part1.md)
    - [Part 2: <å­è®¡åˆ’å>](plan-<ä»»åŠ¡>-part2.md)
  - æ‹†åˆ†ç­–ç•¥: <ä¾æ®è¯´æ˜>
  - çŠ¶æ€: ç­‰å¾…å­è®¡åˆ’æ‰§è¡Œ
```

---

## æ—¥å¿—å¥‘çº¦ï¼ˆå‘½ä»¤è‡ªå†™ + Agent è¿½åŠ ï¼‰
```md
# /split-plan @ <scope_dir>
start: <ISO>
inputs: {...}
## agent: task-planner/analyze start
...ï¼ˆä»»åŠ¡åˆ†ææ˜ç»†ï¼‰
## agent: task-planner/analyze result: success
## agent: task-planner/split start
...ï¼ˆæ‹†åˆ†æ˜ç»†ï¼‰
## agent: task-planner/split result: success
created_sub_plans:
  - plan-<ä»»åŠ¡>-part1.md
  - plan-<ä»»åŠ¡>-part2.md
parent_plan_updated: true
links_established: [<é“¾æ¥åˆ—è¡¨>]
notes: <æ‹†åˆ†è¯´æ˜/åç»­å»ºè®®>
result: success | partial | fail
```

---

## å¹‚ç­‰æ€§ä¸æ‰©å±•

- å¹‚ç­‰ï¼šå­è®¡åˆ’å·²å­˜åœ¨æ—¶ï¼Œä¸è¦†ç›–ï¼›å…è®¸ç»§ç»­ç”Ÿæˆ `part<N+1>`ï¼›çˆ¶è®¡åˆ’æ›´æ–°é‡‡ç”¨å¢é‡æ–¹å¼ã€‚
- æ‰©å±•ï¼šåœ¨æ—¥å¿— `additional_actions:` æ®µå¯è®°å½•ä¸Šä¸‹æ–‡ç›¸å…³ã€å¯å¤æ‰§è¡Œä¸”æ— ç ´åçš„è¡¥å……åŠ¨ä½œï¼ˆå¦‚é”šç‚¹ä¿®å¤ï¼‰ã€‚

